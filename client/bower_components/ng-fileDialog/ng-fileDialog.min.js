angular.module("ng-fileDialog",[]).factory("FileDialog",function(){function e(e,t){var i=document.createElement("input");i.type="file",e=e||{},e.multiple&&(i.multiple=!0),e.accept&&(angular.isArray(e.accept)&&e.accept.length>0?i.accept=e.accept.join(","):angular.isString(e.accept)&&(i.accept=e.accept)),e.webkitdirectory&&(i.webkitdirectory=!0),e.nwdirectory&&(i.nwdirectory=!0),e.nwworkingdir&&(i.nwworkingdir=e.nwworkingdir),e.nwsaveas&&(i.nwsaveas=e.nwsaveas),i.addEventListener("change",function(){if(t)if(e.multiple){for(var n=[],c=0;c<i.files.length;c++)n.push(i.files[c]);t(n)}else t(i.files[0])},!1),i.click()}var t={};return t.selectFile=function(t,i){e({accept:i},t)},t.selectFiles=function(t,i){e({multiple:!0,accept:i},t)},t.selectDir=function(t){e({webkitdirectory:!0},t)},t.saveAs=function(t,i,n){e({nwsaveas:i||!0,accept:n},t)},t.open=e,t}).directive("ngFileDialog",function(e){return{restrict:"EA",replace:!1,transclude:!1,require:["?options"],scope:{select:"&",options:"="},link:function(t,i,n){i.on("click",function(i){i.preventDefault(),e.open(t.options,function(e){t.select&&t.select({file:e})})})}}});